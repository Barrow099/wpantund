<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>wpantund: `wpantund` Installation Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">wpantund
   </div>
   <div id="projectbrief">Wireless Network Interface Daemon for Low-Power Wireless SoCs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">`wpantund` Installation Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes the process of building and installing <code>wpantund</code> on both Ubuntu and OS X. Installation on other platforms may be possible, but are left as an excercise for the reader. This document assumes that you are at least casually familiar with <a href="http://www.gnu.org/software/autoconf/autoconf.html">Autoconf</a>. It also assumes that you have already gotten a copy of the wpantund sources, extracted them, and are wondering what to do next.</p>
<h2>Installing <code>wpantund</code> on Ubuntu </h2>
<h3>1. Install Dependencies</h3>
<p>Open up a terminal and perform the following commands: </p><pre class="fragment">sudo apt-get update
# Install runtine-dependent packages (libreadline is optional)
sudo apt-get install dbus libreadline
# Install build-dependent packages (libreadline-dev is optional)
sudo apt-get install gcc g++ libdbus-1-dev libboost-dev libreadline-dev
</pre><h3>2. Configure and build the project</h3>
<p>If the <code>configure</code> script is not already present in the root directory of your <code>wpantund</code> sources (which it should be if you got these sources from a tarball), you will need to <em>bootstrap</em> the project by doing the following: </p><pre class="fragment">sudo apt-get install libtool autoconf autoconf-archive
./bootstrap.sh
</pre><p>If the <code>configure</code> script is already present, then you can just do the following: </p><pre class="fragment">./configure --sysconfdir=/etc
make
</pre><p>This may take a while. You can speed up the process by adding the argument <code>-j4</code> to the call to <code>make</code>, substituting the number <code>4</code> with the number of processor cores you have on your machine. This greatly improves the speed of builds.</p>
<p>Also, if additional debugging information is required or helpful from <code>wpantund</code>, add the argument <code>--enable-debug</code> to the <code>./configure</code> line above.</p>
<h3>3. Install <code>wpantund</code></h3>
<p>Once the build above is complete, execute the following command: </p><pre class="fragment">sudo make install
</pre><p>This will install <code>wpantund</code> onto your computer.</p>
<h2>Installing <code>wpantund</code> on OS X </h2>
<p>Installing <code>wpantund</code> on OS X is largely similar to the process above, except things are complicated by the fact that we depend on DBus&mdash;and there is no native package manager for OS X. These instructions assume that you are using <a href="http://brew.sh/">Homebrew</a> as your package manager.</p>
<p>What is nice about homebrew is that we have a recipe to build <code>wpantund</code> for you. This makes installing <code>wpantund</code> on OS X as easy as: </p><pre class="fragment">brew update
brew install ./etc/wpantund.rb
sudo cp "$(brew --repository)"/Cellar/d-bus/*/org.freedesktop.dbus-session.plist /Library/LaunchDaemons/
sudo launchctl load -w /Library/LaunchDaemons/org.freedesktop.dbus-session.plist
</pre><p>(the last two commands are for setting DBus up to launch properly at startup)</p>
<p>PRO-TIP: Use <code>brew install wpantund --HEAD</code> if you want the latest bleeding-edge version of wpantund!</p>
<p>However, if you want to build <code>wpantund</code> manually, the procedure described below allows you to manually set up the <code>wpantund</code> dependencies so that the build can run without a hitch.</p>
<h3>1. Install Xcode</h3>
<p>Go [here][<a href="http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12">http://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12</a>] and install <a href="https://developer.apple.com/xcode/">Xcode</a> if you haven't already.</p>
<p>After you have installed Xcode, you will need to install the Xcode command-line tools. You can do this easily from the command line with the following command: </p><pre class="fragment">xcode-select --install
</pre><h3>2. Install Homebrew</h3>
<p>Homebrew is a package management system for OS X. While it is possible to install wpantund and its dependencies manually, using homebrew makes this process much easier. If you don't already have it installed on your mac, you can install it using the following instructions (taken from go/homebrew): </p><pre class="fragment">cd ~
mkdir homebrew &amp;&amp; curl -L https://github.com/mxcl/homebrew/tarball/master | tar xz --strip 1 -C homebrew
mkdir ~/bin
</pre><p>Create the file ~/.bash_profile with the following contents (tweak to your preference if you know what you're doing): </p><pre class="fragment"># Global stuff
export PATH=$HOME/bin:$PATH
export EDITOR=vi

# Homebrew stuff
export PATH=$HOME/homebrew/bin:$PATH
</pre><p>Then close and reopen your terminal window.</p>
<h3>2. Install and Setup <code>wpantund</code> dependencies</h3>
<p>We need a few dependencies in order to be able to build and use wpantund. The following commands will get us up and running: </p><pre class="fragment">brew install autoconf automake libtool
brew install pkg-config boost d-bus
sudo cp "$(brew --repository)"/Cellar/d-bus/*/org.freedesktop.dbus-session.plist /Library/LaunchDaemons/
sudo launchctl load -w /Library/LaunchDaemons/org.freedesktop.dbus-session.plist
</pre><h3>3. Configure and build</h3>
<p>At this point, you can jump over to step 2 from the section <em>Installing <code>wpantund</code> on Ubuntu</em>, above.</p>
<h2>Configuring and Using <code>wpantund</code> </h2>
<h3>1. Configuring <code>wpantund</code></h3>
<p>Now that you have <code>wpantund</code> installed, you will need to edit the configuration file to tell the daemon how to communicate with the NCP. You do this by editing the <code>wpantund.conf</code> file, which (if you followed the directions above) should now be at <code>/etc/wpantund.conf</code>.</p>
<p>This file is, by default, filled only with comments&mdash;which describe all of the important configuration options that you might need to set in order to make wpantund usable. Read them over and then uncomment and update the appropriate configuration properties.</p>
<p>Alternatively, you can specify any needed properties on the command line when invoking <code>wpantund</code>. At a minimum, at least <code>NCPSocketName</code> needs to be specified, which describes how <code>wpantund</code> is supposed to talk to the NCP.</p>
<p>Refer to the authorative documentation in <code>/etc/wpantund.conf</code> or <code>./src/wpantund/wpantund.conf</code> for more information.</p>
<h3>2. Start wpantund</h3>
<p>To connect to an NCP on the serial port <code>/dev/ttyUSB0</code>, type the following into terminal: </p><pre class="fragment">sudo /usr/local/sbin/wpantund -o NCPSocketName /dev/ttyUSB0
</pre><p>To start wpan on more than one interface, you can specify the WPAN interface name. For example, to set <code>wpan0</code> network interface on <code>/dev/ttyUSB0</code> USB interface, and <code>wpan1</code> on <code>/dev/ttyUSB1</code>, run: </p><pre class="fragment">sudo /usr/local/sbin/wpantund -o NCPSocketName /dev/ttyUSB0 -o WPANInterfaceName wpan0
</pre><p>and </p><pre class="fragment">sudo /usr/local/sbin/wpantund -o NCPSocketName /dev/ttyUSB1 -o WPANInterfaceName wpan1
</pre><p>Note that, unless you are running as root, you <em>must</em> use <code>sudo</code> when invoking <code>wpantund</code> directly.</p>
<p>On an embedded device, you would add the appropriate scripts or configuration files that would cause <code>wpantund</code> to be started at boot. Doing so should be pretty straightforward.</p>
<h3>3. Using <code>wpanctl</code></h3>
<p>Now that you have <code>wpantund</code> running, you can now issue commands to the daemon using <code>wpanctl</code> from another window: (Again, unless you are running as root, you <em>must</em> use <code>sudo</code>) </p><pre class="fragment">$ sudo /usr/local/bin/wpanctl
wpanctl:wpan0&gt; leave
Leaving current WPAN. . .
wpanctl:wpan0&gt; setprop NetworkKey --data 000102030405060708090a0b0c0d0e0f
wpanctl:wpan0&gt; form "MyCoolNetwork" -c 26
Forming WPAN "MyCoolNetwork" as node type 2
Successfully formed!
wpanctl:wpan0&gt; permit-join 3600 22
Permitting Joining on the current WPAN for 3600 seconds, commissioning traffic on TCP/UDP port 22. . .
wpanctl:wpan0&gt; status
wpan0 =&gt; [
    "AssociationState" =&gt; "joined"
    "NetworkName" =&gt; "MyCoolNetwork"
    "XPanId" =&gt; 0xD6D8A04025AB3B0C
    "PanId" =&gt; 0xE3C3
    "Channel" =&gt; 26
    "AllowingJoin" =&gt; true
    "Prefix" =&gt; [FDD6D8A040250000]
    "NCPVersion" =&gt; "OpenThread/1.0d26-25-gb684c7f; DEBUG; May 9 2016 18:22:04"
    "HWAddr" =&gt; [18B430000003F202]
]
wpanctl:wpan0&gt;</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 15 2016 11:58:11 for wpantund by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
